# Flutter i18n (Internationalization) Reference

Flutter internationalization support guide.

## Overview

Use Flutter's official internationalization approach. Translations are managed through ARB (Application Resource Bundle) files.

### Key Points

| Feature | Description |
|---------|-------------|
| No hardcoding | All text must be i18n processed |
| ARB file location | Translations managed in `lib/l10n/*.arb` files |
| Usage example | Use `T.key` or `Lo.of(context)!.key` |

---

## Setup

### pubspec.yaml

```yaml
dependencies:
  flutter:
    sdk: flutter
  flutter_localizations:
    sdk: flutter
  intl: any

flutter:
  generate: true
```

### l10n.yaml

Create `l10n.yaml` in project root:

```yaml
arb-dir: lib/l10n
template-arb-file: app_en.arb
output-localization-file: app_localizations.dart
output-class: Lo
```

### MaterialApp

```dart
import 'package:flutter_localizations/flutter_localizations.dart';
import 'package:philgo/l10n/app_localizations.dart';

MaterialApp(
  localizationsDelegates: const [
    Lo.delegate,
    GlobalMaterialLocalizations.delegate,
    GlobalWidgetsLocalizations.delegate,
    GlobalCupertinoLocalizations.delegate,
  ],
  supportedLocales: const [
    Locale('en'),
    Locale('ko'),
  ],
  locale: const Locale('ko'),
)
```

---

## ARB File Structure

### File Structure

```
lib/
└── l10n/
    ├── app_en.arb      // English (template)
    ├── app_ko.arb      // Korean
    └── app_localizations.dart  // Auto-generated
```

### ARB File Format

**app_en.arb (template):**

```json
{
  "@@locale": "en",
  "appTitle": "My App",
  "hello": "Hello",
  "welcome": "Welcome, {name}!",
  "@welcome": {
    "placeholders": {
      "name": {"type": "String"}
    }
  },
  "itemCount": "{count, plural, =0{No items} =1{1 item} other{{count} items}}"
}
```

**app_ko.arb:**

```json
{
  "@@locale": "ko",
  "appTitle": "내 앱",
  "hello": "안녕하세요",
  "welcome": "환영합니다, {name}님!",
  "itemCount": "{count, plural, =0{항목 없음} =1{1개 항목} other{{count}개 항목}}"
}
```

---

## Usage Patterns

### Method 1: Lo.of(context)

Standard usage through AppLocalizations instance.

```dart
@override
Widget build(BuildContext context) {
  return Text(Lo.of(context)!.hello);
}
```

### Method 2: T Global Variable (Recommended)

Define global getter for convenient usage.

**Definition (once):**

```dart
// lib/l10n/t.dart
import 'package:flutter/material.dart';
import 'app_localizations.dart';

late BuildContext _context;

void initT(BuildContext context) {
  _context = context;
}

Lo get T => Lo.of(_context)!;
```

**Usage:**

```dart
initT(context);  // Initialize at app start
Text(T.hello)
Text(T.welcome('홍길동'))
Text(T.itemCount(5))
```

### Checking Current Language

```dart
Timer.run(() {
  final Locale locale = Localizations.localeOf(globalContext);
  final languageCode = locale.languageCode;
  print(languageCode);
});
```

### Placeholders

```dart
// ARB: "greeting": "Hello, {name}! You have {count} messages."
Text(T.greeting(name: '홍길동', count: 3))
```

### Plurals

```dart
// ARB: "itemCount": "{count, plural, =0{No items} =1{1 item} other{{count} items}}"
Text(T.itemCount(0))   // "No items"
Text(T.itemCount(1))   // "1 item"
Text(T.itemCount(5))   // "5 items"
```

### Select

```dart
// ARB: "gender": "{gender, select, male{He} female{She} other{They}}"
Text(T.gender('male'))    // "He"
Text(T.gender('female'))  // "She"
```

---

## Best Practices

### 1. No Hardcoding - Mandatory

```dart
// Wrong
Text('로그인')
Text('환영합니다')

// Correct
Text(T.login)
Text(T.welcome)
```

### 2. Key Naming Convention

```json
{
  "loginTitle": "로그인",
  "loginEmail": "이메일",
  "loginPassword": "비밀번호",
  "loginButton": "로그인",
  "actionSave": "저장",
  "actionCancel": "취소",
  "errorRequired": "필수 항목입니다",
  "errorInvalidEmail": "유효한 이메일을 입력하세요"
}
```

### 3. Add Descriptions

```json
{
  "welcomeMessage": "Welcome back, {name}!",
  "@welcomeMessage": {
    "description": "Greeting shown on home screen after user logs in"
  }
}
```

---

## Quick Reference

| Action | Command/Code |
|--------|-------------|
| Generate code | `flutter gen-l10n` |
| Use translation | `T.keyName` or `Lo.of(context)!.keyName` |
| Placeholder | `T.welcome(name: '홍길동')` |
| Plural | `T.itemCount(count)` |
| File structure | `lib/l10n/app_*.arb` |
